webpackJsonp([4],{"5zde":function(e,t,n){n("zQR9"),n("qyJz"),e.exports=n("FeBl").Array.from},Gu7T:function(e,t,n){"use strict";t.__esModule=!0;var r,s=n("c/Tr"),i=(r=s)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},KgSi:function(e,t){},"c/Tr":function(e,t,n){e.exports={default:n("5zde"),__esModule:!0}},fBQ2:function(e,t,n){"use strict";var r=n("evD5"),s=n("X8DO");e.exports=function(e,t,n){t in e?r.f(e,t,s(0,n)):e[t]=n}},mvHQ:function(e,t,n){e.exports={default:n("qkKv"),__esModule:!0}},qB4Z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("//Fk"),s=n.n(r),i=n("mvHQ"),a=n.n(i),o=n("Gu7T"),c=n.n(o),u=n("Xxa5"),f=n.n(u),p=n("exGp"),d=n.n(p),l=n("U8Tl"),h={name:"editWork",data:function(){var e=this;return{workList:[],workListOrigin:[],workShowList:[],pageNum:1,pageSize:10,curTypeInfo:JSON.parse(localStorage.getItem("typeIdsInfo")),columns:[{title:"编号",width:200,align:"center",key:"id",render:function(e,t){return e("span",{},"No."+t.row.id)}},{title:"作品名称",align:"center",key:"namechs"},{title:"评分",align:"center",key:"sort",sortable:"custom",render:function(e,t){return e("span",{},t.row.sort)}},{title:"评分状态",align:"center",key:"modifytime",render:function(e,t){return e("div",[e("Tag",{props:{color:0===t.row.modifytime?"volcano":"green"}},0===t.row.modifytime?"未打分":"已打分")])}},{title:"操作",key:"handel",align:"center",render:function(t,n){return t("div",[t("a",{attrs:{class:"blue-btn"},on:{click:function(){e.preview(n.row)}}},"评分/修改")])}}],spinShow:!0,scorebegin:"",editScorebeginTime:"",scorebeginPicker:"",scoreend:"",editScoreendTime:"",scoreendPicker:"",isEditJudge:!1}},created:function(){var e=this;return d()(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.getWorkLists(),e.getMatchTime();case 2:case"end":return t.stop()}},t,e)}))()},methods:{update:function(){var e=this;return d()(f.a.mark(function t(){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.getWorkLists(),t.next=3,e.getTypeProcess();case 3:n=t.sent,e.curTypeInfo.taskfinish=n.taskfinish,e.curTypeInfo.taskall=n.taskall;case 6:case"end":return t.stop()}},t,e)}))()},getWorkLists:function(){var e=this;this.spinShow=!0,this.$ajax(this,{data:{op:"c30202",c1:this.curTypeInfo.c1,c2:this.curTypeInfo.c2,c3:this.curTypeInfo.c3,c4:this.curTypeInfo.c4}}).then(function(t){e.workList=t.data,e.workList.map(function(e){e.s1=e.s1||0,e.s2=e.s2||0,e.s3=e.s3||0,e.s4=e.s4||0,e.s5=e.s5||0,e.s6=e.s6||0,e.s7=e.s7||0,e.s8=e.s8||0,e.s9=e.s9||0,e.s10=e.s10||0,e.sort=e.s1+e.s2+e.s3+e.s4+e.s5+e.s6+e.s7+e.s8+e.s8+e.s9+e.s10}),e.workListOrigin=[].concat(c()(e.workList)),e.changePage(1),e.spinShow=!1}).catch(function(t){e.spinShow=!1,e.$Message.error(t.message)})},changePage:function(e){this.pageNum=e,this.workShowList=this.workList.slice((this.pageNum-1)*this.pageSize,this.pageNum*this.pageSize)},handleSortChange:function(e){var t=e.key,n=e.order,r=JSON.parse(a()(this.workList));"desc"===n?(r.sort(function(e,n){return n[t]-e[t]}),this.workList=[].concat(c()(r))):"asc"===n?(r.sort(function(e,n){return e[t]-n[t]}),this.workList=[].concat(c()(r))):this.workList=[].concat(c()(this.workListOrigin)),this.changePage(1)},preview:function(e){var t=this.$router.resolve({path:"/pre",query:{id:e.id}});window.open(t.href,"_blank")},getMatchTime:function(){var e=this;this.$ajax(this,{data:{op:"y20205",matchid:Object(l.a)()}}).then(function(t){if(t.data){var n=(new Date).getTime();1e3*t.data.scoreend>n&&n>1e3*t.data.scorebegin?e.isEditJudge=!0:e.isEditJudge=!1}}).catch(function(t){e.$Message.error(t.message)})},getTypeProcess:function(){var e=this;return new s.a(function(t){e.$ajax(e,{data:{op:"c30207",c1:e.curTypeInfo.c1,c2:e.curTypeInfo.c2,c3:e.curTypeInfo.c3,c4:e.curTypeInfo.c4}}).then(function(e){var n=e.data;t(n)}).catch(function(t){e.$Message.error(t.message)})})}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"page_head_h1"},[n("Breadcrumb",[n("BreadcrumbItem",{attrs:{to:"/menu/works"}},[e._v("需打分列表")]),e._v(" "),n("BreadcrumbItem",[e._v("评分详情")])],1)],1),e._v(" "),n("div",{staticStyle:{background:"rgba(50, 50, 50, 1)","font-size":"16px",padding:"20px","border-radius":"5px"}},[n("div",{staticStyle:{"font-family":"'宋体 Bold', '宋体 常规', '宋体'","font-weight":"700","font-style":"normal",color:"#FF9900"}},[e.curTypeInfo.c1name?n("span",[e._v(e._s(e.curTypeInfo.c1name))]):e._e(),e.curTypeInfo.c2name?n("span",[e._v(" - "+e._s(e.curTypeInfo.c2name))]):e._e(),e.curTypeInfo.c3name?n("span",[e._v(" - "+e._s(e.curTypeInfo.c3name))]):e._e(),e.curTypeInfo.c4name?n("span",[e._v(" - "+e._s(e.curTypeInfo.c4name))]):e._e()]),e._v(" "),n("div",{staticStyle:{"margin-top":"20px",color:"white"}},[e._v("已评分/任务数量 ："),n("span",{staticStyle:{color:"#FFFF00"}},[e._v(e._s(e.curTypeInfo.taskfinish)+" / "+e._s(e.curTypeInfo.taskall))])])]),e._v(" "),n("div",{staticStyle:{"margin-top":"20px",position:"relative"}},[e.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):e._e(),e._v(" "),n("div",{staticStyle:{margin:"10px 0"}},[n("Button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("\n        刷新数据\n        "),n("Icon",{attrs:{type:"md-refresh"}})],1)],1),e._v(" "),n("Table",{attrs:{border:"",columns:e.columns,data:e.workShowList},on:{"on-sort-change":e.handleSortChange}}),e._v(" "),n("Page",{staticStyle:{float:"right","margin-tight":"30px","margin-top":"20px"},attrs:{"show-total":"",current:e.pageNum,"page-size":e.pageSize,total:e.workList.length},on:{"on-change":e.changePage}})],1)])},staticRenderFns:[]};var y=n("VU/8")(h,g,!1,function(e){n("KgSi")},null,null);t.default=y.exports},qkKv:function(e,t,n){var r=n("FeBl"),s=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}},qyJz:function(e,t,n){"use strict";var r=n("+ZMJ"),s=n("kM2E"),i=n("sB3e"),a=n("msXi"),o=n("Mhyx"),c=n("QRG4"),u=n("fBQ2"),f=n("3fs2");s(s.S+s.F*!n("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,s,p,d=i(e),l="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,y=void 0!==g,v=0,m=f(d);if(y&&(g=r(g,h>2?arguments[2]:void 0,2)),void 0==m||l==Array&&o(m))for(n=new l(t=c(d.length));t>v;v++)u(n,v,y?g(d[v],v):d[v]);else for(p=m.call(d),n=new l;!(s=p.next()).done;v++)u(n,v,y?a(p,g,[s.value,v],!0):s.value);return n.length=v,n}})}});